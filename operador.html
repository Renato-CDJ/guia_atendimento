<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Roteiro de Atendimento - Operador</title>
  <link rel="stylesheet" href="roteiro.css" />
  <link rel="icon" type="image/png" href="img/operador-de-telemarketing.png">

  <!-- Vari√°veis e t√≠tulo animado (mesmo comportamento do login) -->
  <style>
    :root{
      --accent-dark: #00c853;
      --accent2-dark: #00e676;
      --accent-light: #ff5722;
      --accent2-light: #ff9800;
    }
    .title {
  font-size: clamp(34px, 5vw, 40px);
  font-weight: 900;
  text-align: center;
  margin: 10px 0 20px;
  background: linear-gradient(90deg, var(--accent-dark, #00c853), var(--accent2-dark, #00e676));
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: glow-dark 3s infinite ease-in-out;
}
body[data-theme="light"] .title {
  background: linear-gradient(90deg, var(--accent-light, #ff5722), var(--accent2-light, #ff9800));
  -webkit-background-clip: text;
  background-clip: text;
  animation: glow-light 3s infinite ease-in-out;
}

@keyframes glow-dark {
  0%,100% { filter: drop-shadow(0 0 6px rgba(0,200,83,.5)); }
  50% { filter: drop-shadow(0 0 18px rgba(0,200,83,.9)); }
}
@keyframes glow-light {
  0%,100% { filter: drop-shadow(0 0 6px rgba(255,87,34,.5)); }
  50% { filter: drop-shadow(0 0 18px rgba(255,87,34,.9)); }
}

  </style>
</head>
<body data-role="operador">
  <div class="container">
    <!-- Cabe√ßalho -->
    <header>
      <div><h1 class="title">Roteiro de Atendimento</h1></div>
      <div class="toolbar">
        <input type="text" id="searchInput" class="select" placeholder="üîç Pesquisar..." />
        <button id="btnToggleTheme" class="badge">üåó Tema</button>
      </div>
    </header>

    <!-- Barra de progresso -->
    <div class="progress">
      <div class="progressbar"><div id="bar"></div></div>
    </div>

    <!-- Alerta -->
    <div id="tabAlert" class="tab-alert">
      <div class="msg">
        <b><i>Caso a liga√ß√£o seja interrompida ou cliente desligou, verifique a tabula√ß√£o no √≠cone (‚úî) abaixo</i></b> ‚¨áÔ∏è
      </div>
      <span class="arrow"></span>
    </div>

    <!-- Fluxo -->
    <main id="flow"></main>

    <!-- Bot√µes globais -->
    <div id="globalActions" class="global-actions"></div>
  </div>

  <!-- Modal de Tabula√ß√£o -->
  <div id="tabModal" class="modal">
    <div class="modal-content">
      <span id="closeModal" class="close">&times;</span>
      <h2>Tabula√ß√£o</h2>
      <p id="modalText"></p>
    </div>
  </div>

  <!-- Atalhos -->
  <div class="bottom-shortcuts">
    <a href="tabulacoes.html">üìë Tabula√ß√µes</a>
    <a href="situacoes.html">üìù Situa√ß√µes</a>
    <a href="canais.html">‚òéÔ∏è Canais</a>
    <button id="noteToggle">üìù Bloco de notas</button>
  </div>

  <!-- Painel de Notas -->
  <div id="notePanel">
    <div id="noteToolbar">
      <button onclick="formatNote('bold')"><b>B</b></button>
      <button onclick="formatNote('italic')"><i>I</i></button>
      <button onclick="formatNote('underline')"><u>U</u></button>
      <button onclick="formatNote('insertUnorderedList')">‚Ä¢ Lista</button>
      <button id="noteClose">‚úï</button>
    </div>
    <div id="noteEditor" contenteditable="true"></div>
  </div>

  <!-- App -->
  <script src="roteiro.js"></script>

  <!-- Bloco de notas -->
  <script type="module">
    import { db } from "./firebase.js";
    import { doc, getDoc, setDoc }
      from "https://www.gstatic.com/firebasejs/12.1.0/firebase-firestore.js";

    const noteToggle = document.getElementById("noteToggle");
    const notePanel  = document.getElementById("notePanel");
    const noteEditor = document.getElementById("noteEditor");
    const noteClose  = document.getElementById("noteClose");

    noteToggle.addEventListener("click", () => notePanel.classList.toggle("active"));
    noteClose?.addEventListener("click", () => notePanel.classList.remove("active"));

    window.formatNote = (cmd) => {
      document.execCommand(cmd, false, null);
      saveNotes();
    };

    const noteDocRef = doc(db, "anotacoes", "operador");

    async function saveNotes() {
      try {
        await setDoc(noteDocRef, {
          conteudo: noteEditor.innerHTML,
          atualizado: new Date().toISOString()
        });
        console.log("Nota salva no Firestore!");
      } catch (e) { console.error("Erro ao salvar nota:", e); }
    }

    async function loadNotes() {
      try {
        const snap = await getDoc(noteDocRef);
        if (snap.exists()) noteEditor.innerHTML = snap.data().conteudo || "";
      } catch (e) { console.error("Erro ao carregar nota:", e); }
    }

    noteEditor.addEventListener("input", saveNotes);
    loadNotes();
  </script>

  
</body>
</html>
