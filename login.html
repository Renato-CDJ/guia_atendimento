<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Acesso ao Sistema</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: system-ui, Arial, sans-serif;
      background: linear-gradient(135deg, #0077c8, #00c853);
      height: 100vh;
      margin: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .login-box {
      background: #fff;
      padding: 40px;
      border-radius: 14px;
      box-shadow: 0 8px 24px rgba(0,0,0,.25);
      width: 100%;
      max-width: 380px;
      text-align: center;
      animation: fadeIn 0.6s ease;
    }
    h1 {
      margin-bottom: 25px;
      color: #0077c8;
      font-size: 24px;
    }
    .role-btn {
      display: block;
      width: 100%;
      padding: 14px;
      margin: 10px 0;
      border: none;
      border-radius: 8px;
      font-size: 17px;
      font-weight: bold;
      cursor: pointer;
      transition: transform 0.2s, filter 0.2s;
    }
    .role-btn:hover {
      transform: scale(1.02);
      filter: brightness(1.1);
    }
    .op-btn {
      background: linear-gradient(90deg, #00c853, #009624);
      color: #fff;
    }
    .adm-btn {
      background: linear-gradient(90deg, #0077c8, #004ba0);
      color: #fff;
    }
    .adm-form {
      display: none;
      margin-top: 20px;
      text-align: left;
      animation: fadeIn 0.4s ease;
    }
    .adm-form label {
      font-size: 14px;
      font-weight: 500;
      color: #333;
    }
    .adm-form input {
      width: 100%;
      padding: 10px;
      margin: 6px 0 14px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 15px;
    }
    .adm-form button {
      width: 100%;
      padding: 12px;
      border: none;
      border-radius: 6px;
      background: linear-gradient(90deg, #0077c8, #004ba0);
      color: #fff;
      font-weight: bold;
      cursor: pointer;
      font-size: 16px;
      transition: 0.2s;
    }
    .adm-form button:hover { filter: brightness(1.1); }
    .msg {
      margin-top: 12px;
      font-size: 14px;
      color: #d32f2f;
      text-align: center;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <div class="login-box">
    <h1>Acesso ao Sistema</h1>

    <!-- BotÃµes principais -->
    <button class="role-btn op-btn" id="btnOperador">Sou Operador</button>
    <button class="role-btn adm-btn" id="btnAdm">Sou Administrador</button>

    <!-- FormulÃ¡rio ADM -->
    <div class="adm-form" id="admForm">
      <label for="email">E-mail</label>
      <input type="email" id="email" placeholder="Digite seu e-mail">
      <label for="password">Senha</label>
      <input type="password" id="password" placeholder="Digite sua senha">
      <button id="btnLoginAdm">Entrar como ADM</button>
      <div class="msg" id="msg"></div>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
    import { getAuth, signInWithEmailAndPassword, onAuthStateChanged, signOut } 
      from "https://www.gstatic.com/firebasejs/12.1.0/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDM-cWulKkn5RAT6tns0BktHkRdfFt4-0s",
      authDomain: "roteiro-a6cb0.firebaseapp.com",
      projectId: "roteiro-a6cb0",
      storageBucket: "roteiro-a6cb0.appspot.com",
      messagingSenderId: "304848084937",
      appId: "1:304848084937:web:21c4d4ea2dc862e7e05218",
      measurementId: "G-PLMNPQWVH9"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const ADM_EMAILS = [
      "seuemail@dominio.com", 
      "rcalixto@admin.com"
    ];

    const btnOperador = document.getElementById("btnOperador");
    const btnAdm = document.getElementById("btnAdm");
    const admForm = document.getElementById("admForm");
    const btnLoginAdm = document.getElementById("btnLoginAdm");
    const emailInput = document.getElementById("email");
    const passInput  = document.getElementById("password");
    const msgBox     = document.getElementById("msg");

    // Se clicar em Operador â†’ vai direto (sem login)
btnOperador.addEventListener("click", () => {
  window.location.href = "operador.html";
});

// Se clicar em ADM â†’ mostra form de login
btnAdm.addEventListener("click", () => {
  admForm.style.display = "block";
  btnAdm.style.display = "none";
  btnOperador.style.display = "none";
});

// Login ADM
btnLoginAdm.addEventListener("click", async () => {
  try {
    const cred = await signInWithEmailAndPassword(auth, emailInput.value, passInput.value);
    if (!ADM_EMAILS.includes(cred.user.email)) {
      msgBox.textContent = "Acesso negado: vocÃª nÃ£o Ã© administrador.";
      await signOut(auth);
      return;
    }
    window.location.href = "index.html";
  } catch (e) {
    msgBox.textContent = "Erro: " + e.message;
  }
});

// ðŸ”¹ Auto redireciona apenas se jÃ¡ estiver logado como ADM
onAuthStateChanged(auth, (user) => {
  if (user && ADM_EMAILS.includes(user.email)) {
    window.location.href = "index.html";
  }
});

  </script>
</body>
</html>
